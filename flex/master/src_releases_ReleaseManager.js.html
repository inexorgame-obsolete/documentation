

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: src/releases/ReleaseManager.js | Inexor Flex</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="width: 120px; height: 80px">
        
            <img src="https://raw.githubusercontent.com/inexorgame/artwork/master/logo/logo_rendered.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Inexor Flex</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Modules</h3><ul><li><a href="module-api.html">api</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:api_sub"></div></li><li><a href="module-console.html">console</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:console_sub"></div></li><li><a href="module-context.html">context</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:context_sub"></div></li><li><a href="module-entities.html">entities</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities_sub"></div></li><li><a href="module-gameclient.html">gameclient</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:gameclient_sub"></div></li><li><a href="module-gameserver.html">gameserver</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:gameserver_sub"></div></li><li><a href="module-instances.html">instances</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:instances_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-instances.html#~default_instance_ports">default_instance_ports</a></li><li><a href="module-instances.html#~default_instance_state">default_instance_state</a></li><li><a href="module-instances.html#~default_instance_type">default_instance_type</a></li><li><a href="module-instances.html#~instance_states">instance_states</a></li><li><a href="module-instances.html#~instance_transitions">instance_transitions</a></li><li><a href="module-instances.html#~instance_types">instance_types</a></li></ul></div></li><li><a href="module-interfaces.html">interfaces</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:interfaces_sub"></div></li><li><a href="module-logger.html">logger</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:logger_sub"></div></li><li><a href="module-logging.html">logging</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:logging_sub"></div></li><li><a href="module-media.html">media</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:media_sub"></div></li><li><a href="module-path.html">path</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:path_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-path.html#~config_path">config_path</a></li><li><a href="module-path.html#~DEFAULT_PORT">DEFAULT_PORT</a></li><li><a href="module-path.html#~flex_path">flex_path</a></li><li><a href="module-path.html#~interfaces_path">interfaces_path</a></li><li><a href="module-path.html#~media_path">media_path</a></li><li><a href="module-path.html#~pid_path">pid_path</a></li><li><a href="module-path.html#~releases_path">releases_path</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-path.html#~getConfigPaths">getConfigPaths</a></li><li><a href="module-path.html#~getMediaPaths">getMediaPaths</a></li><li><a href="module-path.html#~getXdgLocationFromEnvironmentVariable">getXdgLocationFromEnvironmentVariable</a></li></ul></div></li><li><a href="module-profiles.html">profiles</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:profiles_sub"></div></li><li><a href="module-releases.html">releases</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:releases_sub"></div></li><li><a href="module-tree.html">tree</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:tree_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-tree.html#~isValidDataType">isValidDataType</a></li><li><a href="module-tree.html#~separator">separator</a></li><li><a href="module-tree.html#~validName">validName</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-tree.html#~datatype">datatype</a></li><li><a href="module-tree.html#~Flex">Flex</a></li></ul></div></li><li><a href="module-treeclient.html">treeclient</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:treeclient_sub"></div></li><li><a href="module-types.html">types</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:types_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-types.html#~getDataType">getDataType</a></li><li><a href="module-types.html#~isInt">isInt</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="FlexArgs.html">FlexArgs</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="FlexArgs_sub"></div></li><li><a href="module-api-ConsoleWsAPI.html">ConsoleWsAPI</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:api~ConsoleWsAPI_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-api-ConsoleWsAPI.html#handleRequest">handleRequest</a></li><li><a href="module-api-ConsoleWsAPI.html#setDependencies">setDependencies</a></li></ul></div></li><li><a href="module-api-FlexRestAPI.html">FlexRestAPI</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:api~FlexRestAPI_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-api-FlexRestAPI.html#getSysInfo">getSysInfo</a></li><li><a href="module-api-FlexRestAPI.html#shutdown">shutdown</a></li><li><a href="module-api-FlexRestAPI.html#version">version</a></li></ul></div></li><li><a href="module-api-InexorTreeRestAPI.html">InexorTreeRestAPI</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:api~InexorTreeRestAPI_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-api-InexorTreeRestAPI.html#convert">convert</a></li><li><a href="module-api-InexorTreeRestAPI.html#dumpInstanceTree">dumpInstanceTree</a></li><li><a href="module-api-InexorTreeRestAPI.html#dumpRootTree">dumpRootTree</a></li><li><a href="module-api-InexorTreeRestAPI.html#dumpSubTree">dumpSubTree</a></li><li><a href="module-api-InexorTreeRestAPI.html#getInstanceNode">getInstanceNode</a></li><li><a href="module-api-InexorTreeRestAPI.html#getRootNode">getRootNode</a></li><li><a href="module-api-InexorTreeRestAPI.html#setInstanceNode">setInstanceNode</a></li><li><a href="module-api-InexorTreeRestAPI.html#setRootNode">setRootNode</a></li></ul></div></li><li><a href="module-api-InexorTreeWsAPI.html">InexorTreeWsAPI</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:api~InexorTreeWsAPI_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-api-InexorTreeWsAPI.html#addNode">addNode</a></li><li><a href="module-api-InexorTreeWsAPI.html#convert">convert</a></li><li><a href="module-api-InexorTreeWsAPI.html#handleRequest">handleRequest</a></li><li><a href="module-api-InexorTreeWsAPI.html#setDependencies">setDependencies</a></li><li><a href="module-api-InexorTreeWsAPI.html#syncNode">syncNode</a></li></ul></div></li><li><a href="module-api-InstancesRestAPI.html">InstancesRestAPI</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:api~InstancesRestAPI_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-api-InstancesRestAPI.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-api-InstancesRestAPI.html#connectToInstance">connectToInstance</a></li><li><a href="module-api-InstancesRestAPI.html#createInstance">createInstance</a></li><li><a href="module-api-InstancesRestAPI.html#disconnectFromInstance">disconnectFromInstance</a></li><li><a href="module-api-InstancesRestAPI.html#getInstance">getInstance</a></li><li><a href="module-api-InstancesRestAPI.html#listInstances">listInstances</a></li><li><a href="module-api-InstancesRestAPI.html#removeInstance">removeInstance</a></li><li><a href="module-api-InstancesRestAPI.html#setDependencies">setDependencies</a></li><li><a href="module-api-InstancesRestAPI.html#startAllInstances">startAllInstances</a></li><li><a href="module-api-InstancesRestAPI.html#startInstance">startInstance</a></li><li><a href="module-api-InstancesRestAPI.html#stopAllInstances">stopAllInstances</a></li><li><a href="module-api-InstancesRestAPI.html#stopInstance">stopInstance</a></li><li><a href="module-api-InstancesRestAPI.html#synchronizeWithInstance">synchronizeWithInstance</a></li></ul></div></li><li><a href="module-api-MediaRepositoryRestAPI.html">MediaRepositoryRestAPI</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:api~MediaRepositoryRestAPI_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-api-MediaRepositoryRestAPI.html#createMediaRepository">createMediaRepository</a></li><li><a href="module-api-MediaRepositoryRestAPI.html#removeMediaRepository">removeMediaRepository</a></li><li><a href="module-api-MediaRepositoryRestAPI.html#scanMediaRepositories">scanMediaRepositories</a></li><li><a href="module-api-MediaRepositoryRestAPI.html#updateMediaRepository">updateMediaRepository</a></li><li><a href="module-api-MediaRepositoryRestAPI.html#updateMediaRepositoryBranch">updateMediaRepositoryBranch</a></li></ul></div></li><li><a href="module-api-ProfilesRestAPI.html">ProfilesRestAPI</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:api~ProfilesRestAPI_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-api-ProfilesRestAPI.html#createProfile">createProfile</a></li><li><a href="module-api-ProfilesRestAPI.html#dumpProfilesTree">dumpProfilesTree</a></li><li><a href="module-api-ProfilesRestAPI.html#listProfiles">listProfiles</a></li><li><a href="module-api-ProfilesRestAPI.html#removeProfile">removeProfile</a></li><li><a href="module-api-ProfilesRestAPI.html#switchToProfile">switchToProfile</a></li></ul></div></li><li><a href="module-console-CommandManager.html">CommandManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:console~CommandManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-console-CommandManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-console-CommandManager.html#setDependencies">setDependencies</a></li></ul></div></li><li><a href="module-console-ConsoleManager.html">ConsoleManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:console~ConsoleManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-console-ConsoleManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-console-ConsoleManager.html#createConsole">createConsole</a></li><li><a href="module-console-ConsoleManager.html#getBuffer">getBuffer</a></li><li><a href="module-console-ConsoleManager.html#getInstanceLogger">getInstanceLogger</a></li><li><a href="module-console-ConsoleManager.html#mapStreamToLog">mapStreamToLog</a></li><li><a href="module-console-ConsoleManager.html#setDependencies">setDependencies</a></li><li><a href="module-console-ConsoleManager.html#writeBuffer">writeBuffer</a></li></ul></div></li><li><a href="module-entities-Entity.html">Entity</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities~Entity_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-entities-Entity.html#addChild">addChild</a></li><li><a href="module-entities-Entity.html#addParent">addParent</a></li><li><a href="module-entities-Entity.html#destroy">destroy</a></li><li><a href="module-entities-Entity.html#getChildEntities">getChildEntities</a></li><li><a href="module-entities-Entity.html#getIncomingRelationships">getIncomingRelationships</a></li><li><a href="module-entities-Entity.html#getOutgoingRelationships">getOutgoingRelationships</a></li><li><a href="module-entities-Entity.html#getParentEntities">getParentEntities</a></li><li><a href="module-entities-Entity.html#getType">getType</a></li><li><a href="module-entities-Entity.html#getUuid">getUuid</a></li><li><a href="module-entities-Entity.html#isChildEntity">isChildEntity</a></li><li><a href="module-entities-Entity.html#isParentEntity">isParentEntity</a></li><li><a href="module-entities-Entity.html#removeChildEntity">removeChildEntity</a></li><li><a href="module-entities-Entity.html#removeParentEntity">removeParentEntity</a></li></ul></div></li><li><a href="module-entities-EntityManager.html">EntityManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities~EntityManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-entities-EntityManager.html#create">create</a></li><li><a href="module-entities-EntityManager.html#getAll">getAll</a></li><li><a href="module-entities-EntityManager.html#getByUuid">getByUuid</a></li></ul></div></li><li><a href="module-entities-EntitySystem.html">EntitySystem</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities~EntitySystem_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-entities-EntitySystem.html#getEntityManager">getEntityManager</a></li><li><a href="module-entities-EntitySystem.html#getEntityTypeManager">getEntityTypeManager</a></li><li><a href="module-entities-EntitySystem.html#getRelationshipManager">getRelationshipManager</a></li><li><a href="module-entities-EntitySystem.html#getRelationshipTypeManager">getRelationshipTypeManager</a></li></ul></div></li><li><a href="module-entities-EntityType.html">EntityType</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities~EntityType_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-entities-EntityType.html#getEntities">getEntities</a></li><li><a href="module-entities-EntityType.html#getName">getName</a></li><li><a href="module-entities-EntityType.html#getUuid">getUuid</a></li><li><a href="module-entities-EntityType.html#isEntityOfType">isEntityOfType</a></li><li><a href="module-entities-EntityType.html#isEntityRegistered">isEntityRegistered</a></li><li><a href="module-entities-EntityType.html#register">register</a></li><li><a href="module-entities-EntityType.html#unregister">unregister</a></li></ul></div></li><li><a href="module-entities-EntityTypeManager.html">EntityTypeManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities~EntityTypeManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-entities-EntityTypeManager.html#create">create</a></li><li><a href="module-entities-EntityTypeManager.html#getAll">getAll</a></li><li><a href="module-entities-EntityTypeManager.html#getByUuid">getByUuid</a></li><li><a href="module-entities-EntityTypeManager.html#remove">remove</a></li></ul></div></li><li><a href="module-entities-Relationship.html">Relationship</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities~Relationship_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-entities-Relationship.html#disconnect">disconnect</a></li><li><a href="module-entities-Relationship.html#getEndEntity">getEndEntity</a></li><li><a href="module-entities-Relationship.html#getStartEntity">getStartEntity</a></li><li><a href="module-entities-Relationship.html#getType">getType</a></li><li><a href="module-entities-Relationship.html#getUuid">getUuid</a></li></ul></div></li><li><a href="module-entities-RelationshipManager.html">RelationshipManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities~RelationshipManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-entities-RelationshipManager.html#create">create</a></li><li><a href="module-entities-RelationshipManager.html#getAll">getAll</a></li><li><a href="module-entities-RelationshipManager.html#getByUuid">getByUuid</a></li><li><a href="module-entities-RelationshipManager.html#remove">remove</a></li></ul></div></li><li><a href="module-entities-RelationshipType.html">RelationshipType</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities~RelationshipType_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-entities-RelationshipType.html#getName">getName</a></li><li><a href="module-entities-RelationshipType.html#getUuid">getUuid</a></li><li><a href="module-entities-RelationshipType.html#isRelationshipOfType">isRelationshipOfType</a></li><li><a href="module-entities-RelationshipType.html#isRelationshipRegistered">isRelationshipRegistered</a></li><li><a href="module-entities-RelationshipType.html#register">register</a></li><li><a href="module-entities-RelationshipType.html#unregister">unregister</a></li></ul></div></li><li><a href="module-entities-RelationshipTypesManager.html">RelationshipTypesManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:entities~RelationshipTypesManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-entities-RelationshipTypesManager.html#create">create</a></li><li><a href="module-entities-RelationshipTypesManager.html#getAll">getAll</a></li><li><a href="module-entities-RelationshipTypesManager.html#getByName">getByName</a></li><li><a href="module-entities-RelationshipTypesManager.html#getByUuid">getByUuid</a></li><li><a href="module-entities-RelationshipTypesManager.html#remove">remove</a></li></ul></div></li><li><a href="module-gameclient-ScreenManager.html">ScreenManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:gameclient~ScreenManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-gameclient-ScreenManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-gameclient-ScreenManager.html#onInstanceConnected">onInstanceConnected</a></li><li><a href="module-gameclient-ScreenManager.html#setDependencies">setDependencies</a></li></ul></div></li><li><a href="module-gameserver-IntermissionService.html">IntermissionService</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:gameserver~IntermissionService_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-gameserver-IntermissionService.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-gameserver-IntermissionService.html#onInstanceConnected">onInstanceConnected</a></li><li><a href="module-gameserver-IntermissionService.html#setDependencies">setDependencies</a></li></ul></div></li><li><a href="module-gameserver-MapRotationService.html">MapRotationService</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:gameserver~MapRotationService_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-gameserver-MapRotationService.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-gameserver-MapRotationService.html#getRandomMap">getRandomMap</a></li><li><a href="module-gameserver-MapRotationService.html#onIntermission">onIntermission</a></li><li><a href="module-gameserver-MapRotationService.html#setDependencies">setDependencies</a></li><li><a href="module-gameserver-MapRotationService.html#setMap">setMap</a></li></ul></div></li><li><a href="module-instances-Connector.html">Connector</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:instances~Connector_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-instances-Connector.html#protoDescriptor">protoDescriptor</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-instances-Connector.html#addSynchronizeListener">addSynchronizeListener</a></li><li><a href="module-instances-Connector.html#addTreeNodeSyncListenersFromDefaults">addTreeNodeSyncListenersFromDefaults</a></li><li><a href="module-instances-Connector.html#closeGrpcConnection">closeGrpcConnection</a></li><li><a href="module-instances-Connector.html#connect">connect</a></li><li><a href="module-instances-Connector.html#convert">convert</a></li><li><a href="module-instances-Connector.html#getDataType">getDataType</a></li><li><a href="module-instances-Connector.html#getDefaultValue">getDefaultValue</a></li><li><a href="module-instances-Connector.html#getEventType">getEventType</a></li><li><a href="module-instances-Connector.html#getId">getId</a></li><li><a href="module-instances-Connector.html#getLoggerName">getLoggerName</a></li><li><a href="module-instances-Connector.html#getMessage">getMessage</a></li><li><a href="module-instances-Connector.html#getPath">getPath</a></li><li><a href="module-instances-Connector.html#linkTreeMounts">linkTreeMounts</a></li><li><a href="module-instances-Connector.html#loadInstanceConfiguration">loadInstanceConfiguration</a></li><li><a href="module-instances-Connector.html#onNewTreeNode">onNewTreeNode</a></li><li><a href="module-instances-Connector.html#onTreeNodeSync">onTreeNodeSync</a></li><li><a href="module-instances-Connector.html#populateInstanceTreeFromDefaults">populateInstanceTreeFromDefaults</a></li><li><a href="module-instances-Connector.html#removeGrpcListeners">removeGrpcListeners</a></li><li><a href="module-instances-Connector.html#removeListeners">removeListeners</a></li><li><a href="module-instances-Connector.html#removeTreeListeners">removeTreeListeners</a></li><li><a href="module-instances-Connector.html#sendFinishedTreeIntro">sendFinishedTreeIntro</a></li><li><a href="module-instances-Connector.html#updateTree">updateTree</a></li></ul></div></li><li><a href="module-instances-InstanceManager.html">InstanceManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:instances~InstanceManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-instances-InstanceManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-instances-InstanceManager.html#clear">clear</a></li><li><a href="module-instances-InstanceManager.html#connect">connect</a></li><li><a href="module-instances-InstanceManager.html#create">create</a></li><li><a href="module-instances-InstanceManager.html#disconnect">disconnect</a></li><li><a href="module-instances-InstanceManager.html#exists">exists</a></li><li><a href="module-instances-InstanceManager.html#getCurrentProfile">getCurrentProfile</a></li><li><a href="module-instances-InstanceManager.html#getHostname">getHostname</a></li><li><a href="module-instances-InstanceManager.html#getInstancesByState">getInstancesByState</a></li><li><a href="module-instances-InstanceManager.html#getInstancesByType">getInstancesByType</a></li><li><a href="module-instances-InstanceManager.html#getPort">getPort</a></li><li><a href="module-instances-InstanceManager.html#getTransition">getTransition</a></li><li><a href="module-instances-InstanceManager.html#isValidInstanceType">isValidInstanceType</a></li><li><a href="module-instances-InstanceManager.html#killProcess">killProcess</a></li><li><a href="module-instances-InstanceManager.html#loadInstances">loadInstances</a></li><li><a href="module-instances-InstanceManager.html#pause">pause</a></li><li><a href="module-instances-InstanceManager.html#remove">remove</a></li><li><a href="module-instances-InstanceManager.html#resume">resume</a></li><li><a href="module-instances-InstanceManager.html#saveInstances">saveInstances</a></li><li><a href="module-instances-InstanceManager.html#setDependencies">setDependencies</a></li><li><a href="module-instances-InstanceManager.html#shutdownProcess">shutdownProcess</a></li><li><a href="module-instances-InstanceManager.html#start">start</a></li><li><a href="module-instances-InstanceManager.html#startAll">startAll</a></li><li><a href="module-instances-InstanceManager.html#stop">stop</a></li><li><a href="module-instances-InstanceManager.html#stopAll">stopAll</a></li><li><a href="module-instances-InstanceManager.html#transist">transist</a></li></ul></div></li><li><a href="module-interfaces-LayerManager.html">LayerManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:interfaces~LayerManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-interfaces-LayerManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-interfaces-LayerManager.html#createLayer">createLayer</a></li><li><a href="module-interfaces-LayerManager.html#hideLayer">hideLayer</a></li><li><a href="module-interfaces-LayerManager.html#reloadLayer">reloadLayer</a></li><li><a href="module-interfaces-LayerManager.html#removeLayer">removeLayer</a></li><li><a href="module-interfaces-LayerManager.html#setAcceptingKeyInput">setAcceptingKeyInput</a></li><li><a href="module-interfaces-LayerManager.html#setAcceptingMouseInput">setAcceptingMouseInput</a></li><li><a href="module-interfaces-LayerManager.html#setDependencies">setDependencies</a></li><li><a href="module-interfaces-LayerManager.html#setLayerUrl">setLayerUrl</a></li><li><a href="module-interfaces-LayerManager.html#showLayer">showLayer</a></li></ul></div></li><li><a href="module-interfaces-WebUserInterfaceManager.html">WebUserInterfaceManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:interfaces~WebUserInterfaceManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-interfaces-WebUserInterfaceManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#createInterface">createInterface</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#disableInterface">disableInterface</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#enableInterface">enableInterface</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#getAbsoluteFsPath">getAbsoluteFsPath</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#getFullUrl">getFullUrl</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#getInterfaceNames">getInterfaceNames</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#getPath">getPath</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#getRelativeFsPath">getRelativeFsPath</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#getRelativeUrl">getRelativeUrl</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#interfaceExists">interfaceExists</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#loadInterfaces">loadInterfaces</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#removeInterface">removeInterface</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#scanForInterfaces">scanForInterfaces</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#setDependencies">setDependencies</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#updateInterface">updateInterface</a></li><li><a href="module-interfaces-WebUserInterfaceManager.html#updateInterfaceNode">updateInterfaceNode</a></li></ul></div></li><li><a href="module-logging-LogManager.html">LogManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:logging~LogManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-logging-LogManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-logging-LogManager.html#clear">clear</a></li><li><a href="module-logging-LogManager.html#createLogger">createLogger</a></li><li><a href="module-logging-LogManager.html#getLogger">getLogger</a></li><li><a href="module-logging-LogManager.html#loadLogConfiguration">loadLogConfiguration</a></li><li><a href="module-logging-LogManager.html#setDependencies">setDependencies</a></li><li><a href="module-logging-LogManager.html#setLoglevel">setLoglevel</a></li></ul></div></li><li><a href="module-media-FilesystemRepositoryManager.html">FilesystemRepositoryManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:media~FilesystemRepositoryManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-media-FilesystemRepositoryManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-media-FilesystemRepositoryManager.html#setDependencies">setDependencies</a></li></ul></div></li><li><a href="module-media-GitRepositoryManager.html">GitRepositoryManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:media~GitRepositoryManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-media-GitRepositoryManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-media-GitRepositoryManager.html#setDependencies">setDependencies</a></li></ul></div></li><li><a href="module-media-MapManager.html">MapManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:media~MapManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-media-MapManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-media-MapManager.html#convert">convert</a></li><li><a href="module-media-MapManager.html#createConfigTree">createConfigTree</a></li><li><a href="module-media-MapManager.html#findMapFiles">findMapFiles</a></li><li><a href="module-media-MapManager.html#getMapNames">getMapNames</a></li><li><a href="module-media-MapManager.html#loadMapConfiguration">loadMapConfiguration</a></li><li><a href="module-media-MapManager.html#setDependencies">setDependencies</a></li><li><a href="module-media-MapManager.html#updateMaps">updateMaps</a></li></ul></div></li><li><a href="module-media-MediaManager.html">MediaManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:media~MediaManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-media-MediaManager.html#addMedia">addMedia</a></li><li><a href="module-media-MediaManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-media-MediaManager.html#setDependencies">setDependencies</a></li></ul></div></li><li><a href="module-media-MediaRepositoryManager.html">MediaRepositoryManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:media~MediaRepositoryManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-media-MediaRepositoryManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-media-MediaRepositoryManager.html#setDependencies">setDependencies</a></li></ul></div></li><li><a href="module-media-TextureManager.html">TextureManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:media~TextureManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-media-TextureManager.html#textureTypes">textureTypes</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-media-TextureManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-media-TextureManager.html#findTextureFilesByTypes">findTextureFilesByTypes</a></li><li><a href="module-media-TextureManager.html#setDependencies">setDependencies</a></li><li><a href="module-media-TextureManager.html#updateTextures">updateTextures</a></li></ul></div></li><li><a href="module-profiles-ProfileManager.html">ProfileManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:profiles~ProfileManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-profiles-ProfileManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-profiles-ProfileManager.html#create">create</a></li><li><a href="module-profiles-ProfileManager.html#exists">exists</a></li><li><a href="module-profiles-ProfileManager.html#getAllProfiles">getAllProfiles</a></li><li><a href="module-profiles-ProfileManager.html#getConfigPath">getConfigPath</a></li><li><a href="module-profiles-ProfileManager.html#getCurrentProfile">getCurrentProfile</a></li><li><a href="module-profiles-ProfileManager.html#getCurrentProfileName">getCurrentProfileName</a></li><li><a href="module-profiles-ProfileManager.html#getDefaultProfile">getDefaultProfile</a></li><li><a href="module-profiles-ProfileManager.html#getDefaultProfileName">getDefaultProfileName</a></li><li><a href="module-profiles-ProfileManager.html#getProfile">getProfile</a></li><li><a href="module-profiles-ProfileManager.html#getProfilesConfigPath">getProfilesConfigPath</a></li><li><a href="module-profiles-ProfileManager.html#loadProfiles">loadProfiles</a></li><li><a href="module-profiles-ProfileManager.html#remove">remove</a></li><li><a href="module-profiles-ProfileManager.html#saveProfiles">saveProfiles</a></li><li><a href="module-profiles-ProfileManager.html#setCurrentProfile">setCurrentProfile</a></li><li><a href="module-profiles-ProfileManager.html#setDependencies">setDependencies</a></li><li><a href="module-profiles-ProfileManager.html#switchTo">switchTo</a></li></ul></div></li><li><a href="module-releases-ReleaseManager.html">ReleaseManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:releases~ReleaseManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-releases-ReleaseManager.html#fetching">fetching</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-releases-ReleaseManager.html#afterPropertiesSet">afterPropertiesSet</a></li><li><a href="module-releases-ReleaseManager.html#checkForNewReleases">checkForNewReleases</a></li><li><a href="module-releases-ReleaseManager.html#determinePlatform">determinePlatform</a></li><li><a href="module-releases-ReleaseManager.html#downloadRelease">downloadRelease</a></li><li><a href="module-releases-ReleaseManager.html#getBinaryPath">getBinaryPath</a></li><li><a href="module-releases-ReleaseManager.html#getConfigPath">getConfigPath</a></li><li><a href="module-releases-ReleaseManager.html#getExecutableName">getExecutableName</a></li><li><a href="module-releases-ReleaseManager.html#getOrInstallRelease">getOrInstallRelease</a></li><li><a href="module-releases-ReleaseManager.html#getRelease">getRelease</a></li><li><a href="module-releases-ReleaseManager.html#getVersionStrFromZipName">getVersionStrFromZipName</a></li><li><a href="module-releases-ReleaseManager.html#installRelease">installRelease</a></li><li><a href="module-releases-ReleaseManager.html#loadConfig">loadConfig</a></li><li><a href="module-releases-ReleaseManager.html#makeZipNameFromVersion">makeZipNameFromVersion</a></li><li><a href="module-releases-ReleaseManager.html#mkdirLocalCache">mkdirLocalCache</a></li><li><a href="module-releases-ReleaseManager.html#saveConfig">saveConfig</a></li><li><a href="module-releases-ReleaseManager.html#setDependencies">setDependencies</a></li><li><a href="module-releases-ReleaseManager.html#uninstallRelease">uninstallRelease</a></li></ul></div></li><li><a href="module-treeclient-TreeClient.html">TreeClient</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:treeclient~TreeClient_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-treeclient-TreeClient.html#branchMediaRepository">branchMediaRepository</a></li><li><a href="module-treeclient-TreeClient.html#callEndpoint">callEndpoint</a></li><li><a href="module-treeclient-TreeClient.html#clientWindowFullscreen">clientWindowFullscreen</a></li><li><a href="module-treeclient-TreeClient.html#clientWindowMaximize">clientWindowMaximize</a></li><li><a href="module-treeclient-TreeClient.html#clientWindowMinimize">clientWindowMinimize</a></li><li><a href="module-treeclient-TreeClient.html#clientWindowRestore">clientWindowRestore</a></li><li><a href="module-treeclient-TreeClient.html#connectInstance">connectInstance</a></li><li><a href="module-treeclient-TreeClient.html#createEndpoint">createEndpoint</a></li><li><a href="module-treeclient-TreeClient.html#createInstance">createInstance</a></li><li><a href="module-treeclient-TreeClient.html#createMediaRepository">createMediaRepository</a></li><li><a href="module-treeclient-TreeClient.html#createProfile">createProfile</a></li><li><a href="module-treeclient-TreeClient.html#deleteTreeNode">deleteTreeNode</a></li><li><a href="module-treeclient-TreeClient.html#downloadRelease">downloadRelease</a></li><li><a href="module-treeclient-TreeClient.html#dumpInstanceTree">dumpInstanceTree</a></li><li><a href="module-treeclient-TreeClient.html#fetchReleases">fetchReleases</a></li><li><a href="module-treeclient-TreeClient.html#getAllInstances">getAllInstances</a></li><li><a href="module-treeclient-TreeClient.html#getEndpointUrl">getEndpointUrl</a></li><li><a href="module-treeclient-TreeClient.html#getFlexLog">getFlexLog</a></li><li><a href="module-treeclient-TreeClient.html#getFlexSysInfo">getFlexSysInfo</a></li><li><a href="module-treeclient-TreeClient.html#getFlexVersion">getFlexVersion</a></li><li><a href="module-treeclient-TreeClient.html#getInstance">getInstance</a></li><li><a href="module-treeclient-TreeClient.html#getReleaseInfo">getReleaseInfo</a></li><li><a href="module-treeclient-TreeClient.html#getTreeNode">getTreeNode</a></li><li><a href="module-treeclient-TreeClient.html#installRelease">installRelease</a></li><li><a href="module-treeclient-TreeClient.html#listReleases">listReleases</a></li><li><a href="module-treeclient-TreeClient.html#loadReleases">loadReleases</a></li><li><a href="module-treeclient-TreeClient.html#readHJsonConfig">readHJsonConfig</a></li><li><a href="module-treeclient-TreeClient.html#readTOMLConfig">readTOMLConfig</a></li><li><a href="module-treeclient-TreeClient.html#removeInstance">removeInstance</a></li><li><a href="module-treeclient-TreeClient.html#removeMediaRepository">removeMediaRepository</a></li><li><a href="module-treeclient-TreeClient.html#removeProfile">removeProfile</a></li><li><a href="module-treeclient-TreeClient.html#saveReleases">saveReleases</a></li><li><a href="module-treeclient-TreeClient.html#scanMediaRepositories">scanMediaRepositories</a></li><li><a href="module-treeclient-TreeClient.html#setTreeNode">setTreeNode</a></li><li><a href="module-treeclient-TreeClient.html#shutdownFlex">shutdownFlex</a></li><li><a href="module-treeclient-TreeClient.html#startAllInstances">startAllInstances</a></li><li><a href="module-treeclient-TreeClient.html#startInstance">startInstance</a></li><li><a href="module-treeclient-TreeClient.html#stopAllInstances">stopAllInstances</a></li><li><a href="module-treeclient-TreeClient.html#stopInstance">stopInstance</a></li><li><a href="module-treeclient-TreeClient.html#switchProfile">switchProfile</a></li><li><a href="module-treeclient-TreeClient.html#synchronizeInstance">synchronizeInstance</a></li><li><a href="module-treeclient-TreeClient.html#uninstallRelease">uninstallRelease</a></li><li><a href="module-treeclient-TreeClient.html#updateMediaRepository">updateMediaRepository</a></li></ul></div></li><li><a href="module-tree-Root.html">Root</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:tree~Root_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-tree-Root.html#contains">contains</a></li></ul></div></li><li><a href="module-tree-TreeNode.html">TreeNode</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:tree~TreeNode_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-tree-TreeNode.html#getFlatRepresentation">getFlatRepresentation</a></li><li><a href="module-tree-TreeNode.html#Symbol.iterator">Symbol.iterator</a></li></ul></div></li><li><a href="PidManager.html">PidManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PidManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="PidManager.html#createPid">createPid</a></li></ul></div></li><li><a href="ProcessManager.html">ProcessManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ProcessManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ProcessManager.html#createProcessHandlers">createProcessHandlers</a></li><li><a href="ProcessManager.html#onExit">onExit</a></li><li><a href="ProcessManager.html#onReloadSignal">onReloadSignal</a></li><li><a href="ProcessManager.html#onSegfault">onSegfault</a></li><li><a href="ProcessManager.html#onShutdownSignal">onShutdownSignal</a></li><li><a href="ProcessManager.html#onUncaughtException">onUncaughtException</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const EventEmitter = require('events');
const fs = require('fs-extra');
const path = require('path');
const toml = require('toml');
const url = require('url');
const os = require('os');
const util = require('util');
const AdmZip = require('adm-zip');
const https = require('follow-redirects').https;
const semver = require('semver');
const progress = require('progress');

const debuglog = util.debuglog('releases');
const inexor_path = require('@inexorgame/path');

// It won't let us use a custom API agent, take IE5 than
const userAgent = 'Mozilla/4.0 (compatible; MSIE 5.0b1; Mac_PowerPC)';

/**
 * @module releases
 */

class ReleaseManager extends EventEmitter {

    /**
     * @constructor
     */
    constructor(applicationContext) {
        super();

        // Hopefully we will support more platforms in the future
        this.platform = this.determinePlatform();
        // NOTE: This is a tiny developer hack for unsupported platforms
        this.platform = (this.platform.length === 0) ? 'win64' : this.platform;

        // The provider which acts as local cache. needs to be of type filesystem
        this.cacheFolder = '';

        // Safe-locks to prevent concurrent tasks
        this.downloading = [];
        this.installing = [];
        this.uninstalling = [];

        this.releasesFetched = false;
    }

    /**
     * Sets the dependencies from the application context.
     * @function
     */
    setDependencies() {
        /// The Inexor Tree root node
        this.root = this.applicationContext.get('tree');

        /// The router of the Inexor Flex webserver
        this.router = this.applicationContext.get('router');

        /// The Inexor Tree node containing releases
        this.releaseManagerTreeNode = this.root.getOrCreateNode('releases');
        this.releaseChannelsTreeNode = this.releaseManagerTreeNode.getOrCreateNode('channels');
        this.releaseprovidersTreeNode = this.releaseManagerTreeNode.getOrCreateNode('release_providers');

        /// The class logger
        this.log = this.applicationContext.get('logManager').getLogger('flex.releases.ReleaseManager');
    }

    /**
     * Initialization after the components in the application context have been
     * constructed.
     * @function
     */
    afterPropertiesSet() {
        this.loadConfig().then((resolve, reject) => {
            this.mkdirLocalCache();
            // TODO: Move this task to a scheduler (post start tasks)
            this.checkForNewReleases();
        });
    }

    /**
     * Ensures that the local cache folder is available.
     * @function
     */
    mkdirLocalCache() {
        this.log.debug(`Checking whether the releases directory exists at ${this.cacheFolder}`);
        fs.mkdir(this.cacheFolder, (err) => {
            if (!err) {
                this.log.debug(`Created releases directory at ${this.cacheFolder}`);
            } else if (err.code == 'EEXIST') {
                this.log.trace(`Found existing releases directory at ${this.cacheFolder}`);
            } else if (err.code !== 'EEXIST') {
                this.log.error(`Failed to create releases directory at ${this.cacheFolder}`, err);
            }
        });
    }

    /**
     * @property
     * Is any of the providers currently fetching?
     */
    get fetching() {
        let providers = this.releaseprovidersTreeNode.toObject();
        for (let name of Object.keys(providers)) {
            if (providers[name]['isfetching'] == true) {
                return true;
            }
        }
        return false;
    }

    /**
     * Returns the path of the releases.toml.
     * @function
     * @param {string} [filename] - The filename.
     * @return {string} - The path to the configuration file.
     */
    getConfigPath(filename = 'releases.toml') {
        let configPaths = inexor_path.getConfigPaths();
        for (var i = 0; i &lt; configPaths.length; i++) {
            var configPath = path.join(configPaths[i], filename);
            if (fs.existsSync(configPath)) {
                return configPath;
            }
        }
        return filename;
    }

    /**
     * Determines the platform name as uploaded by Travis currently
     * NOTE: Keep this up-to date!
     * TODO: This is a generic function. Move it to server/util!
     * @function
     * @return {string} - '{Windows|Linux|Darwin}{32|64}' first is the CMAKE_SYSTEM_NAME, then 32 or 64
     */
    determinePlatform() {
        let platform = '';
        if (os.platform() == 'win32') {
            platform += 'Windows';
        } else if (os.platform() == 'linux') {
            platform += 'Linux';
        } else if (os.platform() == 'darwin') {
            platform += 'Darwin';
        }

        if (['arm64', 'x64'].includes(os.arch())) {
            platform += '64';
        } else {
            platform += '32';
        }

        return platform;
    }

    /**
     * Get version string from the Zip file name uploaded by Travis/Appveyor currently.
     * Returns 0.8.10@stable from inexor-core-0.8.10@stable-Linux.zip
     * valid input is everything fulfilling the pattern inexor-core-&lt;characters>-&lt;this.platform>&lt;characters> (so also non-zips)
     *
     * TODO: remove magic numbers!
     *
     * @function
     * @param {string} name - the input string.
     * @return {string|null} - the version or '' if pattern isn't matched
     */
    getVersionStrFromZipName(name) {
        const versionStartIndex = 12; // inexor-core-
        const versionEndIndex = name.indexOf(`-${this.platform}`);  // Gets the index where the platform occurs
        const versionStr = name.substring(versionStartIndex, versionEndIndex);
        this.log.debug(`version found out for ${name}: ${versionStr} (start: ${versionStartIndex}, end: ${versionEndIndex}`);
        if (versionEndIndex == -1 || versionEndIndex &lt; 13) {
            return null;
        }
        return versionStr;
    }

    /**
     * Returns the ZIP file name. This file name scheme for ZIP files is mandatory. The
     * releases provided by the Inexor Team are created by Travis and Appveyor and
     * uploaded to GitHub.
     *
     * Returns inexor-core-0.8.10@alpha-Linux32.zip if you give it the version 0.8.10 and the channel @alpha.
     *
     * TODO: can we split the release distribution ZIP files into multiple files?
     * - inexor-core-server-${version}@${channel}-${this.platform}.zip
     * - inexor-core-client-${version}@${channel}-${this.platform}.zip
     *
     * @function
     * @param {string} version - the exact version string.
     * @param {string} channel - the exact release channel.
     * @return {string} - inexor-core-&lt;version>-&lt;this.platform>.zip
     */
    makeZipNameFromVersion(version, channel) {
        return `inexor-core-${version}@${channel}-${this.platform}.zip`;
    }

    /**
     * Returns the bin folder path of a version.
     * @function
     * @param {string} versionRange -  the semantic version range.
     * @param {string} channelSearch - the release channel.
     * @return {string} The binary folder of the specific version or null if no release is installed matching the given versionRange and channelSearch.
     */
    getBinaryPath(versionRange, channelSearch) {
        let releaseNode = this.getRelease(versionRange, channelSearch, true);
        if (!releaseNode) {
            this.log.error(`Could not find at least one installed release matching '${versionRange}' @ ${channelSearch}`);
            return;
        }
        const providerName = releaseNode.getChild('provider').toString();
        if (providerName == 'explicit_path') {
            return releaseNode.path;
        }
        return path.join(releaseNode.path, 'bin');
    }


    /**
     * Returns the name of the executable given its instance type.
     * @function
     * @param {string} instanceType - either client or server: the InexorCore gameserver or gameclient.
     * @return {string} - inexor-core-${instanceType}.exe (on all platforms)
     */
    getExecutableName(instanceType) {
        return `inexor-core-${instanceType}.exe`;
    }

    /**
     * Loads releases from a TOML file.
     * @function
     * @param {string} [filename] - The filename.
     * @return {Promise&lt;bool|string>} - either true or the error reason
     */
    loadConfig(filename = 'releases.toml') {
        return new Promise((resolve, reject) => {
            let configPath = this.getConfigPath(filename);
            this.log.info(`Loading release config from ${configPath}`);
            fs.readFile(configPath, ((err, data) => {
                if (err) {
                    this.log.error(`Failed to load releases config from ${configPath}: ${err.message}`);
                    reject(`Failed to load releases config from ${configPath}: ${err.message}`);
                    return;
                }
                let config = '';
                try {
                    config = toml.parse(data.toString());
                } catch (e) {
                    let errormsg = `Error parsing ${configPath} on line ${e.line}, column ${e.column}: ${e.message}`;
                    this.log.error(errormsg);
                    reject(errormsg);
                    return;
                }
                this.log.info(config);

                if (config.releases['explicit_release_folders']) {
                    for (let i = 0; i &lt; config.releases.explicit_release_folders.length; i++) {
                        // we say the version name is the folder.
                        let fullPath = config.releases.explicit_release_folders[i];
                        let versionName = path.basename(fullPath); // the last folder
                        this.addRelease(versionName, fullPath, true, true, versionName, 'explicit_path');
                    }
                }

                for (let name of Object.keys(config.releases.provider)) {
                    let providerNode = config.releases.provider[name];
                    let needsunpacking = providerNode.needsunpacking == true;
                    this.addProvider(providerNode.name, providerNode.type, providerNode.path, needsunpacking);
                }

                let cache_folder_provider = config.releases['download_destination_provider'];

                // if no cache_folder_provider entry exists, fall back to using the last provider with type filesystem.
                // if none exist: reject
                if (!cache_folder_provider) {
                    let providers_obj = this.releaseprovidersTreeNode.toObject();
                    for (let name of Object.keys(providers_obj)) {
                        if (providers_obj[name].type == 'filesystem') {
                            this.cacheFolder = providers_obj[name].path;
                            resolve(true);
                            return;
                        }
                    }
                    const errmsg = `There was neither a cacheFolder entry nor any release providers of type filesystem in your ${configPath}`;
                    this.log.error(errmsg);
                    reject(false);
                    return;
                }
                if (!this.releaseprovidersTreeNode.hasChild(cache_folder_provider)) {
                    this.log.error(`Cache folder provider error in ${configPath}: provider with name ${cache_folder_provider} does not exists`);
                    reject(false);
                    return
                }
                this.cacheFolder = this.releaseprovidersTreeNode.getChild(cache_folder_provider)['path'];
                this.log.info(`Using the provider ${cache_folder_provider} as cache folder (${this.cacheFolder})`);

                resolve(true);

            }));

        });
    }

    /**
     * Saves release to a TOML file. Currently doing nothing!
     * @function
     * @param {string} [filename] - The filename.
     * @return {Promise&lt;bool|string>} - either true or the error reason
     */
    saveConfig(filename = 'releases.toml') {
        return new Promise((resolve, reject) => {
            this.log.warn(`Saving ${filename} is currently not supported`);
            reject(`Failed to write releases to ${filename}: not supported atm`);
        });
    }

    /**
     * @private
     * Scans folder for subfolders.
     * @param {Object} provider
     * @return {Promise&lt;bool>}
     */
    fetchFromFilesystemProvider(provider) {
        return new Promise((resolve, reject) => {
            let absolutePath = provider['path'];
            this.log.info(`Scanning folder ${absolutePath} for downloaded releases`);
            fs.readdir(absolutePath, (err, items) => {
                if (err) {
                    this.log.error(`Failed to scan folder ${absolutePath} for subfolders: ${err}`);
                    reject(false);
                }

                for (let item of items) {
                    let fullPath = path.join(absolutePath, item);
                    let isFolder = fs.statSync(fullPath).isDirectory();
                    // add all subfolders as releases
                    if (isFolder) {
                        this.addRelease(item, fullPath, true, true, item, provider['name'], null, null);
                        continue;
                    }
                    // add all zips which have the right name as not-installed releases
                    let isZip = path.extname(item) == '.zip';
                    if (isZip) {
                        let versionStr = this.getVersionStrFromZipName(item);
                        if (versionStr) {
                            this.addRelease(versionStr, fullPath, true, false, versionStr, provider['name'], null, null);
                        }
                        continue;
                    }
                }

                resolve(true);
            });
        });
    }


    /**
     * @private
     * Fetches releases from a REST provider and saves them to the Tree.
     * @param {Object} provider - the provider object in the Tree.
     * @return {Promise&lt;bool>}
     */
    fetchFromRestProvider(provider) {
        const path = provider['path'];
        let isFetchingNode = provider['isfetching'];

        let promise = new Promise((resolve, reject) => {

            if (isFetchingNode == true) {
                this.log.error(`Already fetching latest releases from  ${path} (provider: ${provider['name']})`);
                reject(false);
            }
            isFetchingNode = true;
            this.log.info(`Fetching latest releases from  ${path}`);
            let URL = url.parse(path);

            https.get({
                    host: URL.host,
                    path: URL.path,
                    headers: {
                        'User-Agent': userAgent
                    },
                    timeout: 10000 // wait 10 sec at max
                }, (response) => {
                    let body = '';
                    response.on('data', (d) => body += d);

                    response.on('end', () => {
                        let parsed = JSON.parse(body);
                        debuglog(parsed);
                        isFetchingNode = false;

                        for (let release of parsed) {
                            debuglog(release);
                            // this.log.info(release);

                            // find asset path for our platform from json
                            let asset = release.assets.filter((a) => {
                                // TODO: why is the content_type of windows releases 'application/octet-stream' instead of 'application/zip' ?
                                // see: https://api.github.com/repos/inexorgame/inexor-core/releases/8371800/assets
                                if (a.content_type != 'application/zip' &amp;&amp; a.content_type != 'application/octet-stream') {
                                    return false;
                                }
                                return a.name.includes(this.platform);
                            });
                            if (asset[0] != null) {
                                this.addRelease(
                                    release.tag_name,
                                    asset[0].browser_download_url,
                                    false,
                                    false,
                                    release.name,
                                    provider['name'],
                                    release.prerelease,
                                    release.created_at,
                                    asset[0].size
                                );
                            }
                        }

                        resolve(true);
                    });
                }
            );
        });
        return promise;
    }

    /**
     * @private
     * Fetches releases from all available release providers.
     * Inexor Tree: /releases/release_providers/$PROVIDER_NAME
     * @return {Promise&lt;bool>}
     */
    fetchReleases() {
        let promises = [];
        let providers = this.releaseprovidersTreeNode.toObject();
        for (let i of Object.keys(providers)) {
            let promise = this.fetchReleasesByProviderType(providers[i]);
            if (promise != null) {
                promises.push(promise);
            }
        }
        // we now have a promises array and return it a single promise
        // which resolves when all promises inside are done.
        return Promise.all(promises);
    }

    /**
     * @private
     * Fetches releases from the given provider by provider type.
     * @return {Promise&lt;bool>}
     */
    fetchReleasesByProviderType(provider) {
        this.log.debug(`Fetching available releases from ${provider['type']} provider ${provider['name']}`);
        switch (provider['type'].toLowerCase()) {
            case 'filesystem':
                return this.fetchFromFilesystemProvider(provider);
            case 'rest':
                return this.fetchFromRestProvider(provider);
            default:
                this.log.warn(`Skipping unknown provider type ${provider['type']} for provider ${provider['name']}`);
                break;
        }
    }

    /**
     * @private
     * Inserts a release into the tree (a virtual one on a remote server, or a filesystem one).
     * If the release already exists, it returns.
     * @param {string} versionStr - the semantical version of the release (+ possible usage of @channel, i.e. 0.1.1@stable
     *                           Note: in the Tree two fields will be set: version and channel (i.e. 0.1.1 and stable)
     * @param {string} path - the filepath to the release on the harddisk or online.
     * @param {bool} isDownloaded - if the release is already on the harddisk.
     * @param {bool} isInstalled - if the release is a zip or already a directory.
     * @param {string} name - optional name for the release.
     * @param {string} provider - the provider name, where the release is currently.
     * @param {bool} preRelease - if the release is a pre release.
     * @param {string} createdAt - the ISO8601 date when the release was created.
     * @param {number} fileSize - the file size of the release.
     */
    addRelease(versionStr, path, isDownloaded = false, isInstalled = false, name = '', provider = 'explicit_path', preRelease = null, createdAt = null, fileSize = 0) {
        // get the version from a version@channel string:
        let version = versionStr;
        let channel = '';
        const channelIndex = versionStr.indexOf(`@`);  // Gets the index where @ occurs in the versionStr
        if (channelIndex != -1) {
            version = versionStr.substring(0, channelIndex);
            channel = versionStr.substring(channelIndex + 1);
        }
        const actualFileSize = fileSize != 0 ? fileSize : this.getFileSize(path, version, channel);

        let channelNode = this.releaseChannelsTreeNode.getOrCreateNode(channel);

        if (channelNode.hasChild(version)) {
            // handle that the release is already provided by another provider
            let oldReleaseNode = channelNode[version];
            let old_was_downloaded = oldReleaseNode.getChild('isDownloaded').get();
            let old_was_installed = oldReleaseNode.getChild('isInstalled').get();

            // this release is actually 'better' than the saved one (its downloaded/installed already)
            if ((isInstalled &amp;&amp; !old_was_installed) || (isDownloaded &amp;&amp; !old_was_downloaded)) {
                oldReleaseNode['path'] = path;
                oldReleaseNode['fileSize'] = actualFileSize;
                oldReleaseNode['fileSizeDownloaded'] = isDownloaded ? actualFileSize : 0;
                if (name.length(name)) {
                    oldReleaseNode['name'] = name;
                }
                oldReleaseNode['provider'] = provider;
                oldReleaseNode['isDownloaded'] = isDownloaded;
                oldReleaseNode['isInstalled'] = isInstalled;
            }
            if (preRelease != null) {
                oldReleaseNode['preRelease'] = preRelease;
            }
            if (createdAt != null) {
                oldReleaseNode['createdAt'] = createdAt;
            }
        } else {
            // handle that the release is not yet provided
            let releaseNode = channelNode.addNode(version);
            releaseNode.addChild('version', 'string', version);
            releaseNode.addChild('channel', 'string', channel);
            releaseNode.addChild('path', 'string', path);
            releaseNode.addChild('fileSize', 'int64', actualFileSize);
            releaseNode.addChild('fileSizeDownloaded', 'int64', isDownloaded ? actualFileSize : 0);
            releaseNode.addChild('name', 'string', name);
            releaseNode.addChild('provider', 'string', provider);
            releaseNode.addChild('isDownloaded', 'bool', isDownloaded);
            releaseNode.addChild('isInstalled', 'bool', isInstalled);
            releaseNode.addChild('preRelease', 'bool', preRelease != null ? preRelease : true);
            releaseNode.addChild('createdAt', 'string', createdAt != null ? createdAt : '');
            this.emit('onNewReleaseAvailable', version);
            this.log.info(`A release with version ${version} in channel '${channel}' has been added (provider: ${provider})`);
        }
    }

    /**
     * @private
     * Inserts a release provider into the tree.
     * If the name is already in the tree, error and return.
     * @param {string} name - the unique identifier for this provider
     * @param {string} type - either 'filesystem' or 'REST' (case insensitive)
     * @param {string} providerPath - either the URL or path on the filesystem (absolute or relative to path.AppdataLocation[0])
     * @param {string} needsunpacking - does the provider provide zips or folders?
     */
    addProvider(name, type, providerPath, needsunpacking = false) {
        if (this.releaseprovidersTreeNode.hasChild(name)) {

            this.log.warn(`A release provider with name ${name} already exists`);
            return;
        }
        const lowerCaseType = type.toLowerCase();
        if (lowerCaseType != 'filesystem' &amp;&amp; lowerCaseType != 'rest') {
            this.log.error(`The release provider ${name} is of unknown type ${type} (supported: rest and filesystem)`);
            return;
        }
        let absolutePath = providerPath;
        if (lowerCaseType == 'filesystem') {
            absolutePath = path.isAbsolute(providerPath) ? providerPath : path.join(inexor_path.releases_path, providerPath);
        }
        //  this.log.warn(`Len before: ${Object(this.releaseprovidersTreeNode).keys.length}`)
        let providerNode = this.releaseprovidersTreeNode.addNode(name);
        providerNode.addChild('name', 'string', name);
        providerNode.addChild('type', 'string', lowerCaseType);
        providerNode.addChild('path', 'string', absolutePath);
        providerNode.addChild('needsunpacking', 'bool', needsunpacking);
        providerNode.addChild('isfetching', 'bool', false);

        this.log.trace(`Release provider ${name} has been added`);
        this.emit('onNewProviderAvailable', name);
    }

    /**
     * Searches through all releases and returns the one fulfilling the semantic version range the best (and is in the same channel).
     * @function
     * @param {string} versionRange - Either:
     *                                    A) the semantic version range it needs to fulfill ('>0.5.2 || 0.3.8')
     *                                    B) an exact non-semantic version ('build', 'buildnew', 'testbinaries')
     * @param {string} channelSearch - additionally you can specify a channel. Only if that channel matches, the release is a match.
     * @param {bool} onlyInstalled - only return release which is installed (meaning no remote one, no zip one)
     * @return {Node|null} - the InexorTree node or null
     */
    getRelease(versionRange, channelSearch = '*', onlyInstalled = false) {
        let returnNode = null;

        for (let channelName of this.releaseChannelsTreeNode.getChildNames()) {

            const releaseChannelNode = this.releaseChannelsTreeNode[channelName];

            // filter out version if channel is not empty and not matching
            if (channelSearch &amp;&amp; channelSearch != '*' &amp;&amp; channelSearch != channelName) {
                this.log.trace(`Skipping non-matching release: version channel ${channelName} not matching requested channel: ${channelSearch}`);
                continue;
            }

            for (let versionName of releaseChannelNode.getChildNames()) {
                const releaseNode = releaseChannelNode[versionName];

                if (onlyInstalled &amp;&amp; !releaseNode.getChild('isInstalled').get()) {
                    // skip not installed ones if 'only_installed' parameter is true.
                    continue;
                }

                if (!semver.valid(releaseNode.version)) {
                    // all version names not being semantic releases are matched for exactness (i.e. 'build')
                    if (releaseNode.version == versionRange) {
                        returnNode = releaseNode;
                    }
                    continue;
                }

                // filter out versions which do not fulfill the version range
                if (!semver.satisfies(releaseNode.version, versionRange)) {
                    this.log.debug(`${versionName}@${channelName} not fulfilling version range: ${versionRange}`);
                    continue;
                }

                // only set if the specific release is of newer version.
                if (!returnNode || semver.gt(releaseNode.version, returnNode.version)) {
                    returnNode = releaseNode;
                }
            }
        }
        if (returnNode) {
            this.log.debug(`Got matching release: ${returnNode.version}@${returnNode.channel} does fulfill '${versionRange}' @ ${channelSearch}`);
        }

        return returnNode;
    }

    /**
     * Searches through all releases and returns the one fulfilling the semantic version range the best (and is in the same channel).
     * If no release is installed, it checks for available releases
     * @function
     * @param {string} versionRange - Either:
     *                                    A) the semantic version range it needs to fulfill ('>0.5.2 || 0.3.8')
     *                                    B) an exact non-semantic version ('build', 'buildnew', 'testbinaries')
     * @param {string} channelSearch - additionally you can specify a channel. Only if that channel matches, the release is a match.
     * @return {Node|null} - the InexorTree node or null
     */
    getOrInstallRelease(versionRange, channelSearch = '*') {
        const self = this;
        return new Promise((resolve, reject) => {
            self.checkForNewReleases(true).then(() => {
                const releaseNode = this.getRelease(versionRange, channelSearch, true);
                if (releaseNode) {
                    this.log.trace(`Found already installed release ${releaseNode.version}@${releaseNode.channel}`);
                    resolve(releaseNode);
                } else {
                    // Currently no release is installed: Check for release available
                    this.log.trace(`Didn't find an installed release. Searching for available releases: '${versionRange}' @ ${channelSearch}`);
                    const availableReleaseNode = this.getRelease(versionRange, channelSearch, false);
                    if (availableReleaseNode) {
                        // Release is available: Download and install release
                        const version = availableReleaseNode.getChild('version').get();
                        const channel = availableReleaseNode.getChild('channel').get();
                        this.log.info(`Found a release which is available, but not yet installed: ${version}@${channel} ! Downloading and installing automatically...`);
                        // Download and install release by exact version and exact channel
                        this.downloadRelease(version, channel, true);
                        this.once('onReleaseInstalled', () => {
                            this.log.trace(`Successfully (downloaded and) installed release ${version}@${channel}`);
                            resolve(availableReleaseNode);
                        });
                    } else {
                        reject(new Error(`No version fulfills '${versionRange}' @ ${channelSearch}`));
                    }
                }
            });
        });
    }

    /**
     * Checks for new releases and exposes them in the Inexor Tree. See Inexor Tree path: /releases/channels/$CHANNEL_NAME/$VERSION_NUMBER
     *  - version (string) - either a code name or the semver.
     *  - channel (string) - the channel name.
     *  - name (string) - an optional release name.
     *  - path (string) - the path to the version. Depends on the provider type: absolute path for local_cache, URL for github.
     *  - isDownloaded (bool) - whether or not the zip files are already downloaded.
     *  - isInstalled (bool) - whether or not the zip files are already unpacked.
     * @function
     * @param {bool} skipIfAlreadyFetched - If true and the list of releases has been already fetched the list won't be fetched again.
     * @return {Promise&lt;bool>} - have a look at {link ReleaseManager.fetchReleases}
     */
    checkForNewReleases(skipIfAlreadyFetched = false) {
        const self = this;
        return new Promise((resolve, reject) => {
            if (skipIfAlreadyFetched &amp;&amp; self.releasesFetched) {
                resolve(true);
            } else {
                self.log.info('Checking for new releases');
                self.fetchReleases().then((success) => {
                    self.releasesFetched = true;
                    resolve(true);
                });
            }
        });
    }

    /**
     * @private
     * Downloads an archive to the given destination.
     * @function downloadArchive
     * @param  {string} archiveURL - The URL of the archive on a remote server.
     * @param  {string} fileName - The target local file name.
     * @param  {string} destinationPath - The target folder where the file should go.
     * @param  {Node} fileSizeDownloadedNode - The node to update for the download progress.
     * @return {Promise&lt;boolean>}
     */
    downloadArchive(archiveURL, fileName, destinationPath, fileSizeDownloadedNode) {
        return new Promise((resolve, reject) => {
            let URL = url.parse(archiveURL);
            let filePath = path.resolve(destinationPath, fileName);
            let file = fs.createWriteStream(filePath);
            let request = https.get({
                host: URL.host,
                path: URL.path,
                headers: {
                    'User-Agent': userAgent
                }
            }, (response) => {
                response.pipe(file);
                response.on('data', (chunk) => {
                    let oldFileSize = fileSizeDownloadedNode.get();
                    fileSizeDownloadedNode.set(oldFileSize + chunk.length);
                });
                response.on('end', () => {
                    file.close();
                    resolve(true);
                });
            });
            request.on('error', (err) => {
                this.log.error(`Failed to download archive from ${archiveURL}!`, err);
                file.close();
                fs.unlink(filePath, (err2) => {
                    resolve(false);
                });
            });
        });
    }

    /**
     * Downloads a release for the specific version
     * @function
     * @param {string} versionRange - the semantic version range.
     * @param {string} channelSearch - the release channel.
     * @param {bool} doInstall - true, if the release shall be installed after the download has been completed.
     */
    downloadRelease(versionRange, channelSearch, doInstall = true) {
        let releaseNode = this.getRelease(versionRange, channelSearch);
        if (!releaseNode) {
            this.log.error(`Could not find a release matching '${versionRange}' @ ${channelSearch}. Did you fetch?`);
            return;
        }

        const version = releaseNode.version;
        const channel = releaseNode.channel;
        const versionStr = `${version}@${channel}`;

        if (this.downloading.hasOwnProperty(versionStr) &amp;&amp; this.downloading[versionStr]) {
            this.log.error(`Downloading of release ${versionStr} is already in progress`);
            return;
        }
        this.downloading[versionStr] = true;

        let isDownloadedNode = releaseNode.getChild('isDownloaded'); // The TreeNode on a bool
        const isInstalled = releaseNode.getChild('isInstalled').get(); // a bool

        try {
            if (isDownloadedNode.get() &amp;&amp; !isInstalled &amp;&amp; doInstall) {
                // The release is already downloaded but not yet installed
                this.log.trace(`The release ${versionStr} is already downloaded but not yet installed`);
                this.installRelease(version, channel);
                return;
            }

            // only REST providers come here

            const urlNode = releaseNode.getChild('path');
            const fileSizeDownloadedNode = releaseNode.getChild('fileSizeDownloaded');
            const fileSize = releaseNode.getChild('fileSize');
            const zipFilename = this.makeZipNameFromVersion(version, channel);

            let bar = new progress(`Downloading release ${releaseNode.getName()} [:bar] :current / :total`, { total: 100, stream: this.log.stream });
            fileSizeDownloadedNode.on('preSet', (value) => {
                const percent = Math.floor(100 * (value.newValue / fileSize.get()));
                bar.update(percent);
            })

            this.downloadArchive(urlNode.get(), zipFilename, this.cacheFolder, fileSizeDownloadedNode).then((success) => {
                this.downloading[versionStr] = false;
                if (success) {
                    isDownloadedNode.set(true);
                    releaseNode.path = path.join(this.cacheFolder, zipFilename);
                    releaseNode.fileSize = this.getFileSize(releaseNode.path, version, channel);
                    this.log.info(`Release with version ${versionStr} has been downloaded to ${releaseNode.path}`);
                    this.emit('onReleaseDownloaded', version);
                    if (doInstall) {
                        this.installRelease(version, channel);
                    }
                }
            });
        } catch (e) {
            this.log.error(e);
        }
    }

    /**
     * @private
     * @function getFileSize
     * Returns the file size of the given absolute path.
     * @param {string} filePath - the absolute path to the file.
     * @return {number} The file size in bytes.
     */
    getFileSize(filePath, version, channel) {
        this.log.info(filePath);
        try {
            const isZip = path.extname(filePath) == '.zip';
            const isUrl = filePath.startsWith('http');
            if (isZip) {
                this.log.info(fs.statSync(filePath).size);
                return fs.statSync(filePath).size;
            } else if (isUrl) {
                return 0;
            } else {
                const parentFolder = path.resolve(filePath, '..');
                const filePathZip = path.join(parentFolder, `inexor-core-${version}@${channel}-${this.platform}.zip`);
                this.log.info(fs.statSync(filePathZip).size);
                return fs.statSync(filePathZip).size;
            }
        } catch (err) {
            return 0;
        }
    }

    /**
     * @private
     * @function installArchive
     * Unzips a release at the given path
     * @param {string} filePath - the absolute path to the file.
     * @param {string} extractionPath - the name of the folder we unpack everything into.
     * @return {Promise&lt;boolean>}
     */
    installArchive(filePath, extractionPath) {
        return new Promise((resolve, reject) => {
            // the folder which comes out of the zip is named like the zip
            let folderPath = filePath.replace('.zip', '');
            let folderParentPath = path.dirname(folderPath);

            let archive = AdmZip(filePath);
            archive.extractAllToAsync(folderParentPath, true, (done) => {
                fs.rename(folderPath, extractionPath, (done) => {
                    this.log.debug(`Moved folder ${folderPath} to ${extractionPath}`);
                    fs.remove(folderPath, (done) => {
                        resolve(true);
                    });
                });
            });
        });
    }

    /**
     * Installs a release for the given version
     * @function
     * @param {string} versionRange - the semantic version range.
     * @param {string} channelSearch - the release channel.
     * @throws 'Install in progress'
     */
    installRelease(versionRange, channelSearch) {
        let releaseNode = this.getRelease(versionRange, channelSearch);
        if (!releaseNode) {
            this.log.error(`Could not find a release matching '${versionRange}' @ ${channelSearch}. Did you fetch?`);
            return;
        }
        const version = releaseNode.version;
        const channel = releaseNode.channel;
        // This one is here to do the lookup in the maps of installed releases.. key is always version@channel here, even if channel is ''
        const versionStr = `${version}@${channel}`;

        // The release folder however should get named 'version' if channel is '', not 'version@'
        let versionFolderName = version;
        if (channel) {
            versionFolderName = `${version}@${channel}`;
        }

        let installedNode = releaseNode.getChild('isInstalled');

        if (installedNode.get()) {
            this.log.info(`Release ${versionStr} is already installed`);
            return;
        }

        if (this.installing.hasOwnProperty(versionStr) &amp;&amp; this.installing[versionStr]) {
            this.log.error(`Installing of release ${versionStr} is already in progress`);
            return;
        }
        this.installing[versionStr] = true;

        this.log.info(`Installing release ${versionStr} started`);

        let zipFilePath = releaseNode.path;

        const installFolder = path.join(this.cacheFolder, versionFolderName);

        this.installArchive(zipFilePath, installFolder).then((done) => {
            try {
                installedNode.set(true);
                this.installing[versionStr] = false;
                releaseNode.path = installFolder;

                this.log.info(`Release with version ${versionStr} has been installed to ${installFolder}`);
                // make the executables executable on Unix
                for (let type of ['server', 'client']) {
                    let executable = path.join(this.getBinaryPath(version, channel), this.getExecutableName(type));
                    fs.chmodSync(executable, 0o755);
                }
                this.emit('onReleaseInstalled', version);
            } catch (e) {
                this.log.error(e);
            }
        });
    }

    /**
     * Uninstalls a release for the given version
     * @function
     * @param {string} versionRange, the semantic version range.
     * @param {string} channelSearch, the release channel.
     */
    uninstallRelease(versionRange, channelSearch) {
        let releaseNode = this.getRelease(versionRange, channelSearch);
        if (!releaseNode) {
            this.log.error(`No release found to uninstall matching '${versionRange}' @ ${channelSearch}`);
            return;
        }
        const version = releaseNode.version;
        const channel = releaseNode.channel;
        const versionStr = `${version}@${channel}`;

        if (this.uninstalling.hasOwnProperty(versionStr) &amp;&amp; this.uninstalling[versionStr]) {
            this.log.error(`Uninstalling of release ${versionStr} is already in progress`);
            return;
        }
        this.uninstalling[versionStr] = true;
        let installedNode = releaseNode.getChild('isInstalled');
        const installFolder = releaseNode.getChild('path');

        fs.remove(installFolder, (done) => {
            installedNode.set(false);
            this.uninstalling[versionStr] = false;
            this.log.info(`Uninstalled release with version ${versionStr}`);
            this.emit('onReleaseUninstalled', version);
        });
    }
}

module.exports = ReleaseManager;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="https://raw.githubusercontent.com/inexorgame/artwork/master/logo/logo_rendered.png" style="width: 120px; height: 80px">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
